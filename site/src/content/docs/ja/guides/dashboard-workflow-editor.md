---
title: ダッシュボード ワークフローエディタ
description: エージェントオーケストレーションのワークフロー作成、ワーカーへのツール割り当て、セマンティック検索の使い方。
---

ダッシュボード（`server/packages/dashboard`）では、再デプロイせずにオーケストレーションを設定できます。

## タブ概要

- **Projects & Devices**: デバイスごとにワークフローを割り当てる
- **Workflow Library**: グラフワークフローを作成/編集する
- **Documents**: アップロード一覧の閲覧と埋め込み検索を行う
- **Runs**: エージェントグラフの実行履歴の確認とステップ詳細の表示

## ワークフロー作成

**Workflow Library** で新規作成または既存編集を行います。

### ノードタイプ

| ノードタイプ | 役割 | 必須設定 |
|---|---|---|
| `worker` | ReActスタイルのワーカーエージェント | モデル、任意でシステムメッセージ、任意でツール |
| `supervisor` | 複数ワーカーのオーケストレーション | モデル、`config.members`（workerノードキー） |
| `tool` | 単一ツール呼び出しノード | ツール1つ、任意で入出力マッピング |

### ワーカーへのツール割り当て

1. `worker` ノードを選択
2. **Assigned tools** で1つ以上のツールを選択
3. ワークフローを保存

ワーカーには複数ツールを割り当て可能です。

### ツールノードの入出力マッピング

`tool` ノードでは、ツールスキーマ項目をグラフ状態キーに対応付けます。

- `input_mapping`: グラフ状態 -> ツール入力
- `output_mapping`: ツール出力 -> グラフ状態

固定値を渡す場合は `_const:` を使えます（例: `_const:image/png`）。

## 保存前バリデーション

キャンバスで以下を検証します。

- ノードキーの一意性
- 有効なノードタイプ（`worker` / `supervisor` / `tool`）
- worker/supervisor にモデル必須
- tool ノードはツール1つ必須
- supervisor メンバー設定の整合性（workerのみ、重複なし）
- `END` へ到達するエッジが最低1つ必要
- エントリーノードから `END` への到達経路が必要

保存失敗時は表示メッセージに従って修正し、再試行してください。

## デバイスへの割り当て

保存後:

1. **Projects & Devices** を開く
2. デバイスごとにワークフローを選択
3. **Apply** で保存

これにより、そのデバイスからアップロードされたドキュメントに対して実行されるグラフが決まります。

## ドキュメントのセマンティック検索

**Documents** タブで自然文検索（例: `red bike by a window`）を実行できます。

- 説明文シードが見つかる場合は、埋め込み距離で順位付け
- シードが見つからない場合は、語彙検索にフォールバック
- 一致カードには類似度バッジ（例: `92% match`）を表示

この画面は、取り込みと埋め込みパイプラインの検索品質確認にも使えます。

## 実行履歴の確認

**Runs** タブでは、エージェントグラフの実行一覧をステータス、ワークフロー名、タイムスタンプ、所要時間とともに確認できます。

- **ステータス**: 各実行は `completed`（完了）、`running`（実行中）、`failed`（失敗）で表示
- **実行を展開**すると、各ステップの詳細（ノードキー、実行順序、所要時間、ステートデルタ）を確認可能
- **Initial / Final State**: 最初のステップ前と最後のステップ後のグラフ状態全体をJSONで表示
- **エラー**: 実行やステップが失敗した場合、エラーメッセージがインラインで表示
- 過去の実行は **Load more** で追加読み込み可能
