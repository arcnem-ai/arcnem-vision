// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package queries

import (
	"context"
	"database/sql"

	"gorm.io/gorm"

	"gorm.io/gen"

	"gorm.io/plugin/dbresolver"
)

func Use(db *gorm.DB, opts ...gen.DOOption) *Query {
	return &Query{
		db:                           db,
		Account:                      newAccount(db, opts...),
		AgentGraph:                   newAgentGraph(db, opts...),
		AgentGraphEdge:               newAgentGraphEdge(db, opts...),
		AgentGraphNode:               newAgentGraphNode(db, opts...),
		AgentGraphNodeTool:           newAgentGraphNodeTool(db, opts...),
		AgentGraphRun:                newAgentGraphRun(db, opts...),
		AgentGraphRunStep:            newAgentGraphRunStep(db, opts...),
		AgentGraphTemplate:           newAgentGraphTemplate(db, opts...),
		AgentGraphTemplateEdge:       newAgentGraphTemplateEdge(db, opts...),
		AgentGraphTemplateNode:       newAgentGraphTemplateNode(db, opts...),
		AgentGraphTemplateNodeTool:   newAgentGraphTemplateNodeTool(db, opts...),
		Apikey:                       newApikey(db, opts...),
		Device:                       newDevice(db, opts...),
		Document:                     newDocument(db, opts...),
		DocumentDescription:          newDocumentDescription(db, opts...),
		DocumentDescriptionEmbedding: newDocumentDescriptionEmbedding(db, opts...),
		DocumentEmbedding:            newDocumentEmbedding(db, opts...),
		Invitation:                   newInvitation(db, opts...),
		Member:                       newMember(db, opts...),
		Model:                        newModel(db, opts...),
		Organization:                 newOrganization(db, opts...),
		PresignedUpload:              newPresignedUpload(db, opts...),
		Project:                      newProject(db, opts...),
		Tool:                         newTool(db, opts...),
		User:                         newUser(db, opts...),
		Verification:                 newVerification(db, opts...),
	}
}

type Query struct {
	db *gorm.DB

	Account                      account
	AgentGraph                   agentGraph
	AgentGraphEdge               agentGraphEdge
	AgentGraphNode               agentGraphNode
	AgentGraphNodeTool           agentGraphNodeTool
	AgentGraphRun                agentGraphRun
	AgentGraphRunStep            agentGraphRunStep
	AgentGraphTemplate           agentGraphTemplate
	AgentGraphTemplateEdge       agentGraphTemplateEdge
	AgentGraphTemplateNode       agentGraphTemplateNode
	AgentGraphTemplateNodeTool   agentGraphTemplateNodeTool
	Apikey                       apikey
	Device                       device
	Document                     document
	DocumentDescription          documentDescription
	DocumentDescriptionEmbedding documentDescriptionEmbedding
	DocumentEmbedding            documentEmbedding
	Invitation                   invitation
	Member                       member
	Model                        model
	Organization                 organization
	PresignedUpload              presignedUpload
	Project                      project
	Tool                         tool
	User                         user
	Verification                 verification
}

func (q *Query) Available() bool { return q.db != nil }

func (q *Query) clone(db *gorm.DB) *Query {
	return &Query{
		db:                           db,
		Account:                      q.Account.clone(db),
		AgentGraph:                   q.AgentGraph.clone(db),
		AgentGraphEdge:               q.AgentGraphEdge.clone(db),
		AgentGraphNode:               q.AgentGraphNode.clone(db),
		AgentGraphNodeTool:           q.AgentGraphNodeTool.clone(db),
		AgentGraphRun:                q.AgentGraphRun.clone(db),
		AgentGraphRunStep:            q.AgentGraphRunStep.clone(db),
		AgentGraphTemplate:           q.AgentGraphTemplate.clone(db),
		AgentGraphTemplateEdge:       q.AgentGraphTemplateEdge.clone(db),
		AgentGraphTemplateNode:       q.AgentGraphTemplateNode.clone(db),
		AgentGraphTemplateNodeTool:   q.AgentGraphTemplateNodeTool.clone(db),
		Apikey:                       q.Apikey.clone(db),
		Device:                       q.Device.clone(db),
		Document:                     q.Document.clone(db),
		DocumentDescription:          q.DocumentDescription.clone(db),
		DocumentDescriptionEmbedding: q.DocumentDescriptionEmbedding.clone(db),
		DocumentEmbedding:            q.DocumentEmbedding.clone(db),
		Invitation:                   q.Invitation.clone(db),
		Member:                       q.Member.clone(db),
		Model:                        q.Model.clone(db),
		Organization:                 q.Organization.clone(db),
		PresignedUpload:              q.PresignedUpload.clone(db),
		Project:                      q.Project.clone(db),
		Tool:                         q.Tool.clone(db),
		User:                         q.User.clone(db),
		Verification:                 q.Verification.clone(db),
	}
}

func (q *Query) ReadDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Read))
}

func (q *Query) WriteDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Write))
}

func (q *Query) ReplaceDB(db *gorm.DB) *Query {
	return &Query{
		db:                           db,
		Account:                      q.Account.replaceDB(db),
		AgentGraph:                   q.AgentGraph.replaceDB(db),
		AgentGraphEdge:               q.AgentGraphEdge.replaceDB(db),
		AgentGraphNode:               q.AgentGraphNode.replaceDB(db),
		AgentGraphNodeTool:           q.AgentGraphNodeTool.replaceDB(db),
		AgentGraphRun:                q.AgentGraphRun.replaceDB(db),
		AgentGraphRunStep:            q.AgentGraphRunStep.replaceDB(db),
		AgentGraphTemplate:           q.AgentGraphTemplate.replaceDB(db),
		AgentGraphTemplateEdge:       q.AgentGraphTemplateEdge.replaceDB(db),
		AgentGraphTemplateNode:       q.AgentGraphTemplateNode.replaceDB(db),
		AgentGraphTemplateNodeTool:   q.AgentGraphTemplateNodeTool.replaceDB(db),
		Apikey:                       q.Apikey.replaceDB(db),
		Device:                       q.Device.replaceDB(db),
		Document:                     q.Document.replaceDB(db),
		DocumentDescription:          q.DocumentDescription.replaceDB(db),
		DocumentDescriptionEmbedding: q.DocumentDescriptionEmbedding.replaceDB(db),
		DocumentEmbedding:            q.DocumentEmbedding.replaceDB(db),
		Invitation:                   q.Invitation.replaceDB(db),
		Member:                       q.Member.replaceDB(db),
		Model:                        q.Model.replaceDB(db),
		Organization:                 q.Organization.replaceDB(db),
		PresignedUpload:              q.PresignedUpload.replaceDB(db),
		Project:                      q.Project.replaceDB(db),
		Tool:                         q.Tool.replaceDB(db),
		User:                         q.User.replaceDB(db),
		Verification:                 q.Verification.replaceDB(db),
	}
}

type queryCtx struct {
	Account                      *accountDo
	AgentGraph                   *agentGraphDo
	AgentGraphEdge               *agentGraphEdgeDo
	AgentGraphNode               *agentGraphNodeDo
	AgentGraphNodeTool           *agentGraphNodeToolDo
	AgentGraphRun                *agentGraphRunDo
	AgentGraphRunStep            *agentGraphRunStepDo
	AgentGraphTemplate           *agentGraphTemplateDo
	AgentGraphTemplateEdge       *agentGraphTemplateEdgeDo
	AgentGraphTemplateNode       *agentGraphTemplateNodeDo
	AgentGraphTemplateNodeTool   *agentGraphTemplateNodeToolDo
	Apikey                       *apikeyDo
	Device                       *deviceDo
	Document                     *documentDo
	DocumentDescription          *documentDescriptionDo
	DocumentDescriptionEmbedding *documentDescriptionEmbeddingDo
	DocumentEmbedding            *documentEmbeddingDo
	Invitation                   *invitationDo
	Member                       *memberDo
	Model                        *modelDo
	Organization                 *organizationDo
	PresignedUpload              *presignedUploadDo
	Project                      *projectDo
	Tool                         *toolDo
	User                         *userDo
	Verification                 *verificationDo
}

func (q *Query) WithContext(ctx context.Context) *queryCtx {
	return &queryCtx{
		Account:                      q.Account.WithContext(ctx),
		AgentGraph:                   q.AgentGraph.WithContext(ctx),
		AgentGraphEdge:               q.AgentGraphEdge.WithContext(ctx),
		AgentGraphNode:               q.AgentGraphNode.WithContext(ctx),
		AgentGraphNodeTool:           q.AgentGraphNodeTool.WithContext(ctx),
		AgentGraphRun:                q.AgentGraphRun.WithContext(ctx),
		AgentGraphRunStep:            q.AgentGraphRunStep.WithContext(ctx),
		AgentGraphTemplate:           q.AgentGraphTemplate.WithContext(ctx),
		AgentGraphTemplateEdge:       q.AgentGraphTemplateEdge.WithContext(ctx),
		AgentGraphTemplateNode:       q.AgentGraphTemplateNode.WithContext(ctx),
		AgentGraphTemplateNodeTool:   q.AgentGraphTemplateNodeTool.WithContext(ctx),
		Apikey:                       q.Apikey.WithContext(ctx),
		Device:                       q.Device.WithContext(ctx),
		Document:                     q.Document.WithContext(ctx),
		DocumentDescription:          q.DocumentDescription.WithContext(ctx),
		DocumentDescriptionEmbedding: q.DocumentDescriptionEmbedding.WithContext(ctx),
		DocumentEmbedding:            q.DocumentEmbedding.WithContext(ctx),
		Invitation:                   q.Invitation.WithContext(ctx),
		Member:                       q.Member.WithContext(ctx),
		Model:                        q.Model.WithContext(ctx),
		Organization:                 q.Organization.WithContext(ctx),
		PresignedUpload:              q.PresignedUpload.WithContext(ctx),
		Project:                      q.Project.WithContext(ctx),
		Tool:                         q.Tool.WithContext(ctx),
		User:                         q.User.WithContext(ctx),
		Verification:                 q.Verification.WithContext(ctx),
	}
}

func (q *Query) Transaction(fc func(tx *Query) error, opts ...*sql.TxOptions) error {
	return q.db.Transaction(func(tx *gorm.DB) error { return fc(q.clone(tx)) }, opts...)
}

func (q *Query) Begin(opts ...*sql.TxOptions) *QueryTx {
	tx := q.db.Begin(opts...)
	return &QueryTx{Query: q.clone(tx), Error: tx.Error}
}

type QueryTx struct {
	*Query
	Error error
}

func (q *QueryTx) Commit() error {
	return q.db.Commit().Error
}

func (q *QueryTx) Rollback() error {
	return q.db.Rollback().Error
}

func (q *QueryTx) SavePoint(name string) error {
	return q.db.SavePoint(name).Error
}

func (q *QueryTx) RollbackTo(name string) error {
	return q.db.RollbackTo(name).Error
}
